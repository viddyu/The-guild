<!-- https://developer.linkedin.com/docs/getting-started-js-sdk#initialize -->

<head>

<!-- AUTHORIZE === when set to true, it will instruct the SDK to check for a
cookie containing an existing authentication token for the user.

OnLoad === list of Javascript functions that you want the SDK to execute once it has successfully loaded itself -->

<script type="text/javascript" src="http://platform.linkedin.com/in.js?api_key=78nnd61xa8po8u&authorize=true&onLoad=onLinkedinLoad&scope=r_basicprofile">
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

</head>

<body>

	<script type="text/javascript">

	// button test
	function linkedinLoad () {
		console.log("Hey you're loaded broh");
	};

	// Handle an error response from the API call
	function onError(error) {
		console.log(error);
	}

	// Handle the successful return from the API call
	function onSuccess(data) {
		console.log(data);
	}

	// Use the API call wrapper to request the member's basic profile data 
	function getProfileData() {
		IN.API.RAW("/people/~").result(onSuccess).error(onError);
	}

	// Setup an event listener to make an API call once auth is complete
	function onLinkedInLoad() {
		IN.Event.on(IN, "auth", getProfileData);
	}

	// on-click event to handle LinkedIn login
	$("img").on("click", function(event) {
		linkedinLoad();
	});

// Checks if the user has granted access to the application, returns true if the user is authorized, otherwise false

// function authorizeCheck (err, result) {
// 	if (IN.User.isAuthorized() == true) {
// 		return true;
// 	} else {
// 		return false;
// 	}
// };

// // Presents the popup authorization window if the user isn't logged into Linkedin
// // requires user to authorize
// IN.User.authorize(authorizeCheck, callbackScope);

// JavaScript SDK enables you to make authenticated calls to the Linkedin REST API using the generic call wrapper:

// var authorizationURL = 
// "/authorization?" +
// "response_type=code&" + 
// "client_id=78nnd61xa8po8u&" +
// "redirect_uri=https://the-guilds.herokuapp.com/&" +
// "state=&" +
// "scope=r_basicprofile";

// IN.API.RAW(authorizationURL).method(GET).body(bodyContent).result(resultCallback);

// Built-in refresh for user's session
// Combine into refresh button

// IN.User.refresh();

// Logs the user out of the application using the following code
// Clears cookies, does NOT revoke or delete the user's authorization grant for the application
// CallbackFunction calls when the user is logged out
// callbackScope presents an optional scope to run a callbackFunction in.  Defaults to the window scope.

// IN.User.logout(callbackFunction, callbackScope);

// IN --> root of Linkedin JS SDK. 
// Listening for the framework's global events

// Events are: ...
// auth - when the user has authorized this application

// frameworkLoaded - Fires before systemReady when all foundation JavaScript has been loaded from platform.linkedin.com. Usage for this event is intended to be internal-only for now.

// logout - The user has logged out of the application
// systemReady - Fired with the system is completely ready for execution. onLoad events can fire

// callback - function to execute when eventName fires
// callbackScope - object
// extraData - provides additional object to callback, if not will default to {}

// IN.Event.on(IN, eventName, callback, callbackScope, extraData);

// onOnce limits the event's callback to happening a single time

// IN.Event.onOnce(IN, eventName, callback, callbackScope, extraData);


</script>

<script type="in/Login"></script>

<img src="assets/img/linkedin.png">
<div>Hey</div>

</body>